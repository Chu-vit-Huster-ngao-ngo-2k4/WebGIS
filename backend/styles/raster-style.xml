<?xml version="1.0" encoding="utf-8"?>
<Map srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
  
<!-- Styles -->
  <Style name="water">
    <Rule>
      <PolygonSymbolizer fill="#a5bfdd" />
    </Rule>
  </Style>

  <Style name="green_areas">
    <Rule>
      <PolygonSymbolizer fill="#cdebb0" />
    </Rule>
  </Style>

  <Style name="buildings">
    <Rule>
      <PolygonSymbolizer fill="#d9d0c9" />
      <LineSymbolizer stroke="#c4b6ab" stroke-width="0.5" />
    </Rule>
  </Style>

  <Style name="roads_casing">
    <Rule>
      <LineSymbolizer stroke="#cfcfcf" stroke-width="4" stroke-linejoin="round" stroke-linecap="round" />
    </Rule>
  </Style>

  <Style name="roads_fill">
    <Rule>
      <LineSymbolizer stroke="#ffffff" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" />
    </Rule>
  </Style>

  <!-- Layers (Order matters: Bottom to Top) -->
  
  <!-- 1. Water (Sông, Hồ) -->
  <Layer name="water" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    <StyleName>water</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">postgres</Parameter>
      <Parameter name="port">5432</Parameter>
      <Parameter name="dbname">webgis</Parameter>
      <Parameter name="user">postgres</Parameter>
      <Parameter name="password">postgres</Parameter>
      <Parameter name="table">(SELECT way FROM planet_osm_polygon WHERE "natural" IN ('water', 'wetland') OR "waterway" IS NOT NULL) AS data</Parameter>
      <Parameter name="geometry_field">way</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

  <!-- 2. Green Areas (Công viên, Rừng, Cỏ) -->
  <Layer name="green_areas" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    <StyleName>green_areas</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">postgres</Parameter>
      <Parameter name="port">5432</Parameter>
      <Parameter name="dbname">webgis</Parameter>
      <Parameter name="user">postgres</Parameter>
      <Parameter name="password">postgres</Parameter>
      <Parameter name="table">(SELECT way FROM planet_osm_polygon WHERE "leisure" IN ('park', 'garden', 'pitch') OR "landuse" IN ('grass', 'forest', 'meadow')) AS data</Parameter>
      <Parameter name="geometry_field">way</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

  <!-- 3. Roads (Đường xá) -->
  <Layer name="roads" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    <StyleName>roads_casing</StyleName>
    <StyleName>roads_fill</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">postgres</Parameter>
      <Parameter name="port">5432</Parameter>
      <Parameter name="dbname">webgis</Parameter>
      <Parameter name="user">postgres</Parameter>
      <Parameter name="password">postgres</Parameter>
      <Parameter name="table">(SELECT way FROM planet_osm_line WHERE highway IS NOT NULL) AS data</Parameter>
      <Parameter name="geometry_field">way</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

  <!-- 4. Buildings (Nhà cửa) -->
  <Layer name="buildings" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over">
    <StyleName>buildings</StyleName>
    <Datasource>
      <Parameter name="type">postgis</Parameter>
      <Parameter name="host">postgres</Parameter>
      <Parameter name="port">5432</Parameter>
      <Parameter name="dbname">webgis</Parameter>
      <Parameter name="user">postgres</Parameter>
      <Parameter name="password">postgres</Parameter>
      <Parameter name="table">(SELECT way FROM planet_osm_polygon WHERE building IS NOT NULL) AS data</Parameter>
      <Parameter name="geometry_field">way</Parameter>
      <Parameter name="srid">3857</Parameter>
    </Datasource>
  </Layer>

</Map>
